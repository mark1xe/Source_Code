<!-- index.html -->
<!doctype html>
<html lang="vi">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Irrigation Dashboard</title>
  <link rel="stylesheet" href="style.css" />
</head>

<body>
  <div class="wrap">

    <!-- Top: 2x2 status -->
    <header class="topStats">
      <div class="statCard">
        <div class="k">Độ ẩm đất</div>
        <div class="v"><span id="soilStat">--</span><small>%</small></div>
      </div>

      <div class="statCard">
        <div class="k">Lượng nước</div>
        <div class="v"><span id="volumeStat">--</span><small>ml</small></div>
      </div>

      <div class="statCard">
        <div class="k">Ngưỡng</div>
        <div class="v"><span id="thresholdStat">--</span><small>%</small></div>
      </div>

      <div class="statCard">
        <div class="k">Chế độ</div>
        <div class="v"><span id="modeStat">--</span></div>
      </div>
    </header>

    <!-- Modes -->
    <main class="card">
      <h2>Chế độ</h2>

      <section class="modes">
        <!-- Mode 1: Manual -->
        <label class="modeItem modeManual">
          <input id="mode_manual" type="radio" name="mode" />
          <div class="modeMain">
            <div class="modeTop">
              <div>
                <div class="modeName">Bơm (Tưới ngay)</div>
                <div class="modeDesc">Bật/tắt bơm ngay lập tức</div>
              </div>
            </div>

            <!-- Switch -->
            <label class="switch" aria-label="Tưới ngay">
              <input id="manual_switch" type="checkbox" />
              <span class="slider round"></span>
            </label>
          </div>
        </label>

        <!-- Mode 2: Auto -->
        <label class="modeItem">
          <input id="mode_auto" type="radio" name="mode" />
          <div class="modeMain">
            <div class="modeTop">
              <div>
                <div class="modeName">Tự động</div>
                <div class="modeDesc">Tưới theo cảm biến độ ẩm đất</div>
              </div>
              <span class="chip">AUTO</span>
            </div>
          </div>
        </label>

        <!-- Mode 3: Schedule -->
        <label class="modeItem">
          <input id="mode_schedule" type="radio" name="mode" />
          <div class="modeMain">
            <div class="modeTop">
              <div>
                <div class="modeName">Lịch hẹn</div>
                <div class="modeDesc">Đặt lịch theo ngày &amp; giờ thực</div>
              </div>
              <span class="chip">⏱</span>
            </div>

            <div class="scheduleRow">
              <div class="field">
                <label>Ngày</label>
                <input id="schedule_date" type="date" />
              </div>
              <div class="field">
                <label>Giờ</label>
                <input id="schedule_time" type="time" />
              </div>
            </div>
          </div>
        </label>
      </section>
    </main>

    <!-- Settings -->
    <section class="footerRow">
      <div class="miniCard">
        <div class="miniTitle">Điều chỉnh ngưỡng</div>
        <div class="hint">Ngưỡng độ ẩm (%) để tưới tự động.</div>

        <div class="field">
          <label>Ngưỡng độ ẩm (%)</label>
          <input id="threshold_slider" type="range" min="0" max="100" value="40" />
        </div>

        <div class="valueText">Giá trị: <strong id="threshold_display">40%</strong></div>
      </div>

      <div class="miniCard">
        <div class="miniTitle">Điều chỉnh TG bơm</div>
        <div class="hint">Thời gian bơm chạy (giây) khi tưới TỰ ĐỘNG/LỊCH.</div>

        <div class="field">
          <label>Thời gian (giây)</label>
          <input id="pump_seconds" type="number" min="1" max="999" value="10" />
        </div>

        <button id="save_settings" class="btn" type="button">LƯU</button>
      </div>
    </section>

  </div>

  <!-- Firebase v8 -->
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
  <script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-database.js"></script>
  <script src="control.js"></script>
</body>
</html>